--- 
date: 2004-10-21T20:52:14Z
slug: svnnotify-2.41
title: SVN::Notify 2.41 Adds Plain Text Issue Tracking Links
aliases: [/computers/programming/perl/modules/svnnotify_2.41.html]
tags: [Perl, SVN::Notify, Subversion, HTML, XHTML, Email, Request Tracker, Bugzilla, JIRA, ViewCVS]
type: post
---

I expect that this will be my last release of SVN::Notify for a while. I've
already spent more time on it than I had anticipated. But anyway, this is a
pretty solid release. It doesn't change the API or anything, but I feel that the
jump from 2.30 to 2.40 is justified because of the sheer number of changes. From
now on, I expect that it will mostly be maintenance, like 2.41, which fixes a
minor formatting bug. Grab it now from [CPAN].

First, I've added a new, [complex example] of the SVN::Notify::HTML::ColorDiff
output that I will keep up-to-date with all future changes. This will allow
people to get a better idea of what it's capable of than my previous contrived
examples allowed.

The biggest change is that I've moved the [Request Tracker], [Bugzilla], and
[JIRA] support from SVN::Notify::HTML to SVN::Notify. I realized, after the
release of 2.30, that it might be cool to add links to the text-only email
message generated by SVN::Notify, too. So I've done that, including for ViewCVS
links. Unlike in SVN::Notify::HTML, the links won't be inline in the message
(that doesn't work too well in plain text, IMO), but will come in their own
sections after the message. So you'll get something like this (extreme example):

    Log Message:
    -----------
    Let's try a few links to other applications. First, we have
    A Bugzilla Bug # 709. Then we have a JIRA key, TST-1608. And
    finally, we have an RT link to Ticket # 4321.

    Hey, we could add one to ViewCVS for a Subversion Revision
    #606, too!

    ViewCVS Links:
    -------------
        http://viewsvn.bricolage.cc/?rev=606&view=rev

    Bugzilla Links:
    --------------
        http://bugzilla.mozilla.org/show_bug.cgi?id=709

    RT Links:
    --------
        http://rt.cpan.org/NoAuth/Bugs.html?id=4321

    JIRA Links:
    ----------
        http://jira.atlassian.com/secure/ViewIssue.jspa?key=TST-1608

The nice thing is that, for many mail clients, these will be turned into
clickable links. You'll also notice that the text that creates the ViewCVS link
is split over two lines. This is new in this release, and works for
SVN::Notify::HTML, too. I made a few other tweaks to the regular expressions, as
well. Here's a complete list of changes:

-   Fixed accessor generation so that accessors created for the attributes
    passed to `register_attributes()` but a subclass are created in the
    subclass' package instead of in SVN::Notify.
-   Changed parsing for JIRA keys to use any set of capital letters followed by
    a dash and then a number, rather than the literal string “JIRA-” followed by
    a number. Reported by Garrett Rooney.
-   Modified the regular expression patterns for the RT, Bugzilla, RT, and
    ViewCVS links to properly match on word boundaries, so that strings like
    “humbug 12” don't match.
-   Modified the ViewCVS link regular expression pattern so that it matches
    strings like “rev 12” as well as “revision 12”.
-   Modified the RT link regular expression pattern so that it matches strings
    like “RT-Ticket: 23” as well as “Ticket 1234”. Suggested by Jesse Vincent.
-   Added complicated example to try to show off all of the major features. I
    will keep this up-to-date going forward in order to post sample output on
    the Web.
-   Fixed the parsing of log messages so that empty lines are no longer
    eliminated.
-   HTML::ColorDiff now properly handles the listing of binary files in the
    diff, marking them with a new class, “binary”, and using the same CSS as is
    used for the “propset” class.
-   In HTML::ColorDiff, Fixed CSS for the “delfile” class to properly wrap it in
    a border like the other files in the diff.
-   Added labels to the HTML::ColorDiff diff file sections to indicate the type
    of change (“Modified”, “Added”, “Deleted”, or “Property changes”).
-   Moved the `rt_url`, `bugzilla_url`, and `jira_url` parameters from
    SVN::Notify::HTML to SVN::Notify, where they are used to add URLs to the
    text version of log messages.

Enjoy!

  [CPAN]: http://search.cpan.org/dist/SVN-Notify/ "SVN::Notify on CPAN"
  [complex example]: /code/svnnotify/svnnotify-2.40_colordiff_example.html
    "SVN::Notify 2.41 sample ColorDiff output"
  [Request Tracker]: http://www.bestpractical.com/rt/ "RT at Best Practical"
  [Bugzilla]: http://bugzilla.mozilla.org/ "Bugzilla home page"
  [JIRA]: http://www.atlassian.com/software/jira/ "JIRA Website"
